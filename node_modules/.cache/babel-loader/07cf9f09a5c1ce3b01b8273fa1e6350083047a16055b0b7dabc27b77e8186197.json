{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Khalid\\\\Downloads\\\\3dmodel-store (Fend)\\\\3dmodel-store (Fend)\\\\src\\\\ModelList.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport sanityClient from './sanityClient';\nimport ModelPopup from './ModelPopup';\nimport { Canvas } from '@react-three/fiber';\nimport { Suspense } from 'react';\nimport { OrbitControls } from '@react-three/drei';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport './index.css';\n\n// Component to render each 3D model in the card\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ModelViewer({\n  modelUrl,\n  scale = 0.5,\n  cameraPosition = [0, 0, 10],\n  cameraRotation = [0, 0, 0]\n}) {\n  _s();\n  const [scene, setScene] = useState(null);\n  useEffect(() => {\n    if (modelUrl) {\n      const loader = new GLTFLoader();\n      loader.load(modelUrl, gltf => {\n        setScene(gltf.scene);\n      }, undefined, error => {\n        console.error(\"Error loading model:\", error);\n      });\n    }\n  }, [modelUrl]);\n  if (!scene) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading model...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Canvas, {\n    camera: {\n      position: cameraPosition,\n      rotation: cameraRotation,\n      fov: 50\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n      intensity: 0.8\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"directionalLight\", {\n      position: [5, 5, 5],\n      intensity: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: null,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: scene,\n        scale: [scale, scale, scale]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n      enableZoom: false,\n      maxPolarAngle: Math.PI / 2,\n      minPolarAngle: Math.PI / 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(ModelViewer, \"2MZ0nfQtt9BexsA95c/2FrGmf6Y=\");\n_c = ModelViewer;\nexport default function ModelList() {\n  _s2();\n  const [models, setModels] = useState([]);\n  const [selectedModel, setSelectedModel] = useState(null);\n  useEffect(() => {\n    sanityClient.fetch(`*[_type == \"threeDModel\"]{\n        _id,\n        title,\n        description,\n        \"modelUrl\": modelFile.asset->url,\n        \"thumbnailUrl\": thumbnail.asset->url,\n        rotation,\n        scale,\n        cameraPosition,\n        cameraRotation\n      }`).then(data => {\n      const processedData = data.map(model => ({\n        ...model,\n        scale: model.scale || 0.5,\n        // Default scale if not provided\n        cameraPosition: model.cameraPosition || [0, 0, 10],\n        // Default camera position if not provided\n        cameraRotation: model.cameraRotation || [0, 0, 0] // Default camera rotation if not provided\n      }));\n      console.log(\"Fetched models with data:\", processedData);\n      setModels(processedData.reverse()); // Ensure latest models appear first\n    }).catch(error => console.error(\"Error fetching models:\", error));\n  }, []);\n  if (models.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No models found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"model-list\",\n    children: [models.map(model => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"model-card\",\n      onClick: () => setSelectedModel(model),\n      children: [model.modelUrl ? /*#__PURE__*/_jsxDEV(ModelViewer, {\n        modelUrl: model.modelUrl,\n        scale: model.scale,\n        cameraPosition: model.cameraPosition,\n        cameraRotation: model.cameraRotation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this) : model.thumbnailUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: model.thumbnailUrl,\n        alt: model.title,\n        className: \"model-thumbnail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"model-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"model-title\",\n          children: model.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"model-description\",\n          children: model.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, model._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)), selectedModel && /*#__PURE__*/_jsxDEV(ModelPopup, {\n      isOpen: true,\n      onClose: () => setSelectedModel(null),\n      modelTitle: selectedModel.title,\n      modelUrl: selectedModel.modelUrl,\n      scale: selectedModel.scale\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s2(ModelList, \"c0+kvFlTCbDkVSW/gxoREhOYDy8=\");\n_c2 = ModelList;\nvar _c, _c2;\n$RefreshReg$(_c, \"ModelViewer\");\n$RefreshReg$(_c2, \"ModelList\");","map":{"version":3,"names":["React","useState","useEffect","sanityClient","ModelPopup","Canvas","Suspense","OrbitControls","GLTFLoader","jsxDEV","_jsxDEV","ModelViewer","modelUrl","scale","cameraPosition","cameraRotation","_s","scene","setScene","loader","load","gltf","undefined","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","camera","position","rotation","fov","intensity","fallback","object","enableZoom","maxPolarAngle","Math","PI","minPolarAngle","_c","ModelList","_s2","models","setModels","selectedModel","setSelectedModel","fetch","then","data","processedData","map","model","log","reverse","catch","length","className","onClick","thumbnailUrl","src","alt","title","description","_id","isOpen","onClose","modelTitle","_c2","$RefreshReg$"],"sources":["C:/Users/Khalid/Downloads/3dmodel-store (Fend)/3dmodel-store (Fend)/src/ModelList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport sanityClient from './sanityClient';\nimport ModelPopup from './ModelPopup';\nimport { Canvas } from '@react-three/fiber';\nimport { Suspense } from 'react';\nimport { OrbitControls } from '@react-three/drei';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport './index.css';\n\n// Component to render each 3D model in the card\nfunction ModelViewer({ modelUrl, scale = 0.5, cameraPosition = [0, 0, 10], cameraRotation = [0, 0, 0] }) {\n  const [scene, setScene] = useState(null);\n\n  useEffect(() => {\n    if (modelUrl) {\n      const loader = new GLTFLoader();\n      loader.load(\n        modelUrl,\n        (gltf) => {\n          setScene(gltf.scene);\n        },\n        undefined,\n        (error) => {\n          console.error(\"Error loading model:\", error);\n        }\n      );\n    }\n  }, [modelUrl]);\n\n  if (!scene) return <p>Loading model...</p>;\n\n  return (\n    <Canvas\n      camera={{ position: cameraPosition, rotation: cameraRotation, fov: 50 }}\n    >\n      <ambientLight intensity={0.8} />\n      <directionalLight position={[5, 5, 5]} intensity={1} />\n      <Suspense fallback={null}>\n        <primitive object={scene} scale={[scale, scale, scale]} />\n      </Suspense>\n      <OrbitControls enableZoom={false} maxPolarAngle={Math.PI / 2} minPolarAngle={Math.PI / 2} />\n    </Canvas>\n  );\n}\n\nexport default function ModelList() {\n  const [models, setModels] = useState([]);\n  const [selectedModel, setSelectedModel] = useState(null);\n\n  useEffect(() => {\n    sanityClient\n      .fetch(`*[_type == \"threeDModel\"]{\n        _id,\n        title,\n        description,\n        \"modelUrl\": modelFile.asset->url,\n        \"thumbnailUrl\": thumbnail.asset->url,\n        rotation,\n        scale,\n        cameraPosition,\n        cameraRotation\n      }`)\n      .then((data) => {\n        const processedData = data.map((model) => ({\n          ...model,\n          scale: model.scale || 0.5, // Default scale if not provided\n          cameraPosition: model.cameraPosition || [0, 0, 10], // Default camera position if not provided\n          cameraRotation: model.cameraRotation || [0, 0, 0], // Default camera rotation if not provided\n        }));\n        \n        console.log(\"Fetched models with data:\", processedData);\n        setModels(processedData.reverse()); // Ensure latest models appear first\n      })\n      .catch((error) => console.error(\"Error fetching models:\", error));\n  }, []);\n\n  if (models.length === 0) {\n    return <p>No models found.</p>;\n  }\n\n  return (\n    <div className=\"model-list\">\n      {models.map((model) => (\n        <div\n          key={model._id}\n          className=\"model-card\"\n          onClick={() => setSelectedModel(model)}\n        >\n          {model.modelUrl ? (\n            <ModelViewer \n              modelUrl={model.modelUrl} \n              scale={model.scale} \n              cameraPosition={model.cameraPosition} \n              cameraRotation={model.cameraRotation} \n            />\n          ) : (\n            model.thumbnailUrl && (\n              <img src={model.thumbnailUrl} alt={model.title} className=\"model-thumbnail\" />\n            )\n          )}\n          <div className=\"model-info\">\n            <h3 className=\"model-title\">{model.title}</h3>\n            <p className=\"model-description\">{model.description}</p>\n          </div>\n        </div>\n      ))}\n\n      {selectedModel && (\n        <ModelPopup\n          isOpen={true}\n          onClose={() => setSelectedModel(null)}\n          modelTitle={selectedModel.title}\n          modelUrl={selectedModel.modelUrl}\n          scale={selectedModel.scale}\n        />\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}