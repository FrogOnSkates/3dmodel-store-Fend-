{"ast":null,"code":"import React,{useState,useEffect}from'react';import sanityClient from'./sanityClient';import ModelPopup from'./ModelPopup';import{Canvas}from'@react-three/fiber';import{Suspense}from'react';import{OrbitControls}from'@react-three/drei';import{GLTFLoader}from'three/examples/jsm/loaders/GLTFLoader';import'./index.css';// Component to render each 3D model in the card\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ModelViewer(_ref){let{modelUrl,scale}=_ref;const[scene,setScene]=useState(null);// Define a default scale if none is provided\nconst modelScale=scale&&scale.length===3?scale:[0.5,0.5,0.5];useEffect(()=>{if(modelUrl){const loader=new GLTFLoader();loader.load(modelUrl,gltf=>{setScene(gltf.scene);},undefined,error=>{console.error(\"Error loading model:\",error);});}},[modelUrl]);if(!scene)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading model...\"});return/*#__PURE__*/_jsxs(Canvas,{camera:{position:[0,0,10],fov:50},children:[/*#__PURE__*/_jsx(\"ambientLight\",{intensity:0.8}),/*#__PURE__*/_jsx(\"directionalLight\",{position:[5,5,5],intensity:1}),/*#__PURE__*/_jsx(Suspense,{fallback:null,children:/*#__PURE__*/_jsx(\"primitive\",{object:scene,scale:modelScale})}),/*#__PURE__*/_jsx(OrbitControls,{enableZoom:false,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2})]});}export default function ModelList(){const[models,setModels]=useState([]);const[selectedModel,setSelectedModel]=useState(null);useEffect(()=>{sanityClient.fetch(`*[_type == \"threeDModel\"]{\n        _id,\n        title,\n        description,\n        \"modelUrl\": modelFile.asset->url,\n        \"thumbnailUrl\": thumbnail.asset->url,\n        rotation,\n        scale\n      }`).then(data=>{console.log(\"Fetched models with URLs:\",data);setModels(data);}).catch(error=>console.error(\"Error fetching models:\",error));},[]);if(models.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"No models found.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"model-list\",children:[models.map(model=>/*#__PURE__*/_jsxs(\"div\",{className:\"model-card\",onClick:()=>setSelectedModel(model),children:[model.modelUrl?/*#__PURE__*/_jsx(ModelViewer,{modelUrl:model.modelUrl,scale:model.scale}):model.thumbnailUrl&&/*#__PURE__*/_jsx(\"img\",{src:model.thumbnailUrl,alt:model.title,className:\"model-thumbnail\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"model-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"model-title\",children:model.title}),/*#__PURE__*/_jsx(\"p\",{className:\"model-description\",children:model.description})]})]},model._id)),selectedModel&&/*#__PURE__*/_jsx(ModelPopup,{isOpen:true,onClose:()=>setSelectedModel(null),modelTitle:selectedModel.title,modelUrl:selectedModel.modelUrl,scale:selectedModel.scale})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}